(this["webpackJsonpchess-client"]=this["webpackJsonpchess-client"]||[]).push([[0],{141:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(32),r=c.n(a),i=c(11),o=c(9),s=c(6),l=c(99);function u(e,t,c,n,a){var r={method:t};n&&(r=Object(o.a)({headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},r)),c&&(r.headers=Object(o.a)({Authorization:"Bearer ".concat(c)},r.headers));var i=new URL(window.location.href),s="".concat(i.protocol,"//").concat(i.host,"/api");fetch(s+e,r).then((function(e){if(e.ok){var t=e.headers.get("content-type");if(t&&-1!==t.indexOf("application/json"))return e.json().then((function(e){a(null,e)}));a(null,null)}else e.json().then((function(t){a(t.error||e.statusText||"Respuesta Inesperada ".concat(e.status),null)}))})).catch((function(e){a(e.message,null)}))}var j=c(1),b=Object(n.createContext)();function d(e){var t=e.children,c=function(){var e=function(){var e=localStorage.getItem("user");if(e)return JSON.parse(e);var t=sessionStorage.getItem("user");return t?JSON.parse(t):null};console.log("useState: user");var t=Object(n.useState)(e()),c=Object(s.a)(t,2),a=c[0],r=c[1];return[a,function(e,t,c,n){u("/v1/api_keys","POST",null,{login:e,password:t},(function(e,t){c?localStorage.setItem("user",JSON.stringify(t)):sessionStorage.setItem("user",JSON.stringify(t)),r(t),n(e,t)}))},function(e){r(null),localStorage.removeItem("user"),sessionStorage.removeItem("user"),e()}]}();return Object(j.jsx)(b.Provider,{value:c,children:t})}function O(){return Object(n.useContext)(b)}var h=["children"];function p(e){var t=e.children,c=Object(l.a)(e,h),n=O(),a=Object(s.a)(n,1)[0];return Object(j.jsx)(i.b,Object(o.a)(Object(o.a)({},c),{},{render:function(e){var c=e.location;return a?t:Object(j.jsx)(i.a,{to:{pathname:"/login",state:{from:c}}})}}))}var x=c(27),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(n.useRef)(null),c=Object(n.useState)(e),a=Object(s.a)(c,2),r=a[0],i=a[1];return[{value:r,onChange:function(e){return i(e.target.value)},ref:t},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return i(t)},function(){return t.current&&t.current.focus()}]},v=c(21),g=c(15),m=c(8),y=c(38);function k(){var e=Object(n.useState)(),t=Object(s.a)(e,2),c=t[0],a=t[1],r=Object(i.g)(),l=O(),u=Object(s.a)(l,2),b=u[0],d=u[1],h=Object(i.h)(),p=f("alderick84"),k=Object(s.a)(p,3),C=k[0],S=k[2],w=f("123456"),I=Object(s.a)(w,3),N=I[0],T=I[2],F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(n.useRef)(null),c=Object(n.useState)(e),a=Object(s.a)(c,2),r=a[0],i=a[1];return[{checked:r,onChange:function(e){return i(e.target.checked)},ref:t},function(){return i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:e)},function(){return t.current&&t.current.focus()}]}(!0),G=Object(s.a)(F,1)[0],P=(h.state||{from:{pathname:"/"}}).from;Object(n.useEffect)((function(){b&&r.replace(P)}),[b,P,r]);return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(g.a,{style:{width:"36rem"},className:"mx-auto",children:Object(j.jsxs)(g.a.Body,{children:[Object(j.jsx)(g.a.Title,{children:"Iniciar Sesi\xf3n"}),Object(j.jsxs)(g.a.Text,{children:["Debe indicar su nombre de usuario y contrase\xf1a, ni a\xfan no tiene una cuenta ",Object(j.jsx)(x.b,{to:"/register",children:"puede crearla aqu\xed"})]}),Object(j.jsxs)(m.a,{children:[Object(j.jsxs)(m.a.Group,{controlId:"login",children:[Object(j.jsx)(m.a.Label,{children:"Nombre de Usuario o Email"}),Object(j.jsx)(m.a.Control,Object(o.a)(Object(o.a)({type:"text"},C),{},{placeholder:""}))]}),Object(j.jsxs)(m.a.Group,{controlId:"pass",children:[Object(j.jsx)(m.a.Label,{children:"Contrase\xf1a"}),Object(j.jsx)(m.a.Control,Object(o.a)(Object(o.a)({type:"password"},N),{},{placeholder:""}))]}),Object(j.jsx)(m.a.Group,{controlId:"remember",children:Object(j.jsx)(m.a.Check,Object(o.a)(Object(o.a)({type:"checkbox"},G),{},{label:"Recordarme en este equipo"}))}),c&&Object(j.jsx)(y.a,{variant:"danger",children:c}),Object(j.jsx)("p",{children:Object(j.jsx)(x.b,{to:"/recover",children:"Olvid\xe9 mi usuario o contrase\xf1a"})}),Object(j.jsx)(v.a,{variant:"primary",onClick:function(e){e.preventDefault(),C.value?N.value?d(C.value,N.value,G.checked,(function(e,t){t?r.replace(P):a(e)})):(T(),a("Debe escribir una contrase\xf1a")):(S(),a("Debe escribir un email o nombre de usuario"))},children:"Continuar"})]})]})})})}function C(){var e=f("alderick84"),t=Object(s.a)(e,1)[0],c=f(""),a=Object(s.a)(c,3),r=a[0],i=a[2],l=f("123456"),b=Object(s.a)(l,3),d=b[0],O=b[2],h=f("123456"),p=Object(s.a)(h,3),k=p[0],C=p[2],S=Object(n.useState)(),w=Object(s.a)(S,2),I=w[0],N=w[1],T=Object(n.useState)(null),F=Object(s.a)(T,2),G=F[0],P=F[1],E=Object(n.useState)("login"),L=Object(s.a)(E,2),D=L[0],R=L[1];return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(g.a,{style:{width:"36rem"},className:"mx-auto",children:Object(j.jsxs)(g.a.Body,{children:[Object(j.jsx)(g.a.Title,{children:"Recuperar Contrase\xf1a"}),"login"===D&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g.a.Text,{children:"Si olvid\xf3 su nombre de usuario o contrase\xf1a, escriba el correo o el nombre de usuario que us\xf3 para registrarse y recibir\xe1 instrucciones para recuperar su cuenta."}),Object(j.jsxs)(m.a,{children:[Object(j.jsxs)(m.a.Group,{controlId:"login",children:[Object(j.jsx)(m.a.Label,{children:"Nombre de Usuario o Email"}),Object(j.jsx)(m.a.Control,Object(o.a)(Object(o.a)({},t),{},{type:"text"}))]}),I&&Object(j.jsx)(y.a,{variant:"danger",children:I}),Object(j.jsx)(v.a,{variant:"primary",onClick:function(e){e.preventDefault(),u("/v1/recovery_keys/","POST",null,{login:t.value},(function(e,t){e?N(e):(P(t),R("key"))}))},children:"Recuperar"})]})]}),"key"===D&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(g.a.Text,{children:["A su correo ",G.mail," se envi\xf3 su nombre de usuario y una clave de ",G.keyLenght," caracteres."]}),Object(j.jsxs)(m.a,{children:[Object(j.jsxs)(m.a.Group,{controlId:"key",children:[Object(j.jsx)(m.a.Label,{children:"Clave"}),Object(j.jsx)(m.a.Control,Object(o.a)(Object(o.a)({},r),{},{type:"text",placeholder:"Clave de ".concat(G.keyLenght," caracteres que lleg\xf3 a su correo")}))]}),Object(j.jsxs)(m.a.Group,{controlId:"pass",children:[Object(j.jsx)(m.a.Label,{children:"Nueva Contrase\xf1a"}),Object(j.jsx)(m.a.Control,Object(o.a)(Object(o.a)({type:"password"},d),{},{placeholder:"Nueva contrase\xf1a que usar\xe1 para iniciar sesi\xf3n"}))]}),Object(j.jsxs)(m.a.Group,{controlId:"passConf",children:[Object(j.jsx)(m.a.Label,{children:"Confirmaci\xf3n de la Nueva Contrase\xf1a"}),Object(j.jsx)(m.a.Control,Object(o.a)(Object(o.a)({type:"password"},k),{},{placeholder:"Repita la nueva contrase\xf1a"}))]}),I&&Object(j.jsx)(y.a,{variant:"danger",children:I}),Object(j.jsx)(v.a,{variant:"primary",onClick:function(e){e.preventDefault(),r.value?d.value?k.value?d.value!==k.value?(C(),N("La contrase\xf1a y su confirmaci\xf3n no coinciden")):u("/v1/users/".concat(G.id,"/recovered_password"),"PUT",null,{recoveryKey:r.value,password:d.value},(function(e,t){e?N(e):R("end")})):(C(),N("Debe escribir una confirmaci\xf3n de nueva contrase\xf1a")):(O(),N("Debe escribir una nueva contrase\xf1a")):(i(),N("Debe escribir una clave"))},children:"Continuar"})]})]}),"end"===D&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g.a.Text,{children:"Su contrase\xf1a se cambi\xf3 con \xe9xito, ahora puede usarla para iniciar sesi\xf3n"}),Object(j.jsx)(x.b,{to:"/login",children:Object(j.jsx)(v.a,{variant:"primary",children:"Volver al Inicio de Sesi\xf3n"})})]})]})})})}var S=c(98),w=c(74),I=c(43);function N(e){var t=e.onSelect,c=void 0===t?function(e){return e}:t,a=Object(n.useState)([]),r=Object(s.a)(a,2),i=r[0],o=r[1],l=Object(n.useState)(null),b=Object(s.a)(l,2),d=b[0],h=b[1],p=O(),x=Object(s.a)(p,1)[0];return Object(n.useEffect)((function(){u("/v1/users?like=a","GET",x.api_key,null,(function(e,t){e?console.log(e):o(t.filter((function(e){return e.id!==x.id})))}))}),[x]),0===i.length?Object(j.jsx)("p",{children:"Cargando..."}):Object(j.jsx)(I.a,{className:"overflow-auto",style:{height:"100px"},children:i&&i.map((function(e){return Object(j.jsx)(I.a.Item,{active:d&&d.id===e.id,onClick:function(){h(e),c(e)},style:{cursor:"pointer"},children:e.username},e.id)}))})}function T(e){var t=e.onNewGame,c=void 0===t?function(e){return e}:t,a=Object(n.useState)(null),r=Object(s.a)(a,2),i=r[0],o=r[1],l=Object(n.useState)(null),b=Object(s.a)(l,2),d=b[0],h=b[1],p=O(),x=Object(s.a)(p,1)[0];return Object(j.jsxs)("div",{className:"m-3",children:[Object(j.jsx)(m.a,{children:Object(j.jsxs)(m.a.Group,{children:[Object(j.jsx)(m.a.Label,{children:"Jugador"}),Object(j.jsx)(N,{onSelect:function(e){return h(e)}})]})}),i&&Object(j.jsx)(y.a,{variant:"danger",children:i}),Object(j.jsx)(v.a,{onClick:function(){d?u("/v1/games","post",x.api_key,{userId:d.id},(function(e,t){e?o(e):c(t)})):o("Seleccione un jugador")},children:"Crear Juego"})]})}function F(e){var t=e.onSelect,c=void 0===t?function(e){return e}:t,a=e.games,r=e.selected,i=O(),o=Object(s.a)(i,1)[0],l=Object(n.useState)(r),u=Object(s.a)(l,2),b=u[0],d=u[1];return Object(n.useEffect)((function(){d(r)}),[r]),a?0===a.length?Object(j.jsx)("p",{children:"No hay partidas en curso"}):Object(j.jsx)(I.a,{children:a&&a.map((function(e){return Object(j.jsxs)(I.a.Item,{className:"m-0 p-2",active:!!b&&b===e.id,onClick:function(){d(e.id),c(e.id)},style:{cursor:"pointer"},children:[Object(j.jsx)("div",{style:{fontWeight:"bold"},children:e.opponent}),Object(j.jsx)("p",{className:"m-0 p-0",children:e.whiteId===o.id&&e.turn%2===0||e.blackId===o.id&&e.turn%2!==0?"Su turno":"Turno de ".concat(e.opponent)})]},e.id)}))}):Object(j.jsx)("p",{children:"Cargando..."})}var G=c(42),P=Object(n.createContext)();function E(e){var t=e.children,c=Object(n.useState)(null),a=Object(s.a)(c,2),r=a[0],i=a[1],o=Object(n.useState)(null),l=Object(s.a)(o,2),u=l[0],b=l[1],d=Object(n.useCallback)((function(e){i(e),b(e?Object(G.getBoard)(e.pieces,e.turn):null)}),[]),O=Object(n.useCallback)((function(e){b(r?Object(G.getBoard)(r.pieces,e):null)}),[r]),h=[r,u,d,O];return Object(j.jsx)(P.Provider,{value:h,children:t})}function L(){return Object(n.useContext)(P)}function D(e){var t=e.onGameSelected,c=void 0===t?function(e){return e}:t,a=L(),r=Object(s.a)(a,1)[0],i=Object(n.useState)([]),l=Object(s.a)(i,2),b=l[0],d=l[1],h=Object(n.useState)(null),p=Object(s.a)(h,2),x=p[0],f=p[1],v=O(),g=Object(s.a)(v,1)[0],m=Object(n.useState)("open"),y=Object(s.a)(m,2),k=y[0],C=y[1];Object(n.useEffect)((function(){d((function(e){return e.map((function(e){return r&&r.id===e.id?Object(o.a)(Object(o.a)({},e),{},{turn:r.turn}):e}))}))}),[r]);var I=Object(n.useCallback)((function(){console.log("reloading open game list"),u("/v1/users/".concat(g.id,"/games/open"),"GET",g.api_key,null,(function(e,t){e?console.log(e):(t&&t.length>0&&(f(t[0].id),c(t[0].id)),d(t))}))}),[g.id,g.api_key,c]);return Object(n.useEffect)((function(){I()}),[I]),Object(j.jsxs)(S.a,{id:"controlled-tab-example",activeKey:k,onSelect:function(e){return C(e)},children:[Object(j.jsx)(w.a,{eventKey:"new",title:"Nueva Partida",children:Object(j.jsx)(T,{onNewGame:function(){I(),C("open")}})}),Object(j.jsx)(w.a,{eventKey:"open",title:"Partidas",children:Object(j.jsx)(F,{games:b,selected:x,onSelect:c})})]})}var R=c(146),q=c(147),B=c(94),J=c(50),_=c(73);function z(e){var t=e.col,c=e.row,n=e.piece,a=void 0===n?null:n,r=e.reversed,i=e.src,s=e.myTurn,l=e.myColor,u=e.highlights,b=e.lastMov,d=e.onSelect,O=void 0===d?function(e){return e}:d,h="".concat(t).concat(c),p=s&&(a&&l===a[0]||u.includes(h)),x=t%2!==0?c%2!==0:c%2===0,f=i&&i===h,v=x?"#b3e5fc":"#ffffff",g=u.includes(h),m=b&&(b.dest===h||b.orig===h),y=g?a?{position:"absolute",width:"60px",height:"60px",backgroundSize:"55px 55px",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundImage:"url('/assets/circle.svg')"}:{position:"absolute",width:"60px",height:"60px",backgroundSize:"15px 15px",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundImage:"url('/assets/dot.svg')"}:null;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{style:{cursor:p?"pointer":"default",width:"60px",height:"60px",position:"relative",backgroundColor:v},onClick:function(){p&&O()},children:[t===(r?8:1)?Object(j.jsx)("div",{style:Object(o.a)(Object(o.a)({},{position:"absolute",userSelect:"none",width:"25px",height:"25px",top:"0px",left:"0px"}),{},{color:x?"#FFFFFF":"#b3e5fc"}),children:c}):"",c===(r?8:1)?Object(j.jsx)("div",{style:Object(o.a)(Object(o.a)({},{position:"absolute",userSelect:"none",width:"25px",height:"25px",bottom:"0px",right:"0px",textAlign:"right"}),{},{color:x?"#FFFFFF":"#b3e5fc"}),children:{1:"a",2:"b",3:"c",4:"d",5:"e",6:"f",7:"g",8:"h"}[t]}):"",f&&Object(j.jsx)("div",{style:{position:"absolute",width:"60px",height:"60px",backgroundRepeat:"repeat",backgroundImage:"url('/assets/mask.png')"}}),m&&Object(j.jsx)("div",{style:{position:"absolute",width:"60px",height:"60px",backgroundRepeat:"repeat",backgroundImage:"url('/assets/mask.png')"}}),g&&Object(j.jsx)("div",{style:y}),a&&Object(j.jsx)("div",{style:{position:"absolute",margin:"5px",width:"50px",height:"50px",backgroundSize:"50px 50px",backgroundImage:"url('/assets/".concat(a.slice(0,-1),".svg')")}}),!1]})})}function A(e){var t=e.reversed,c=void 0!==t&&t,a=L(),r=Object(s.a)(a,3),i=r[0],o=r[1],l=r[2],b=O(),d=Object(s.a)(b,1)[0],h=Object(n.useState)(null),p=Object(s.a)(h,2),x=p[0],f=p[1],v=Object(n.useState)([]),g=Object(s.a)(v,2),m=g[0],y=g[1];Object(n.useEffect)((function(){f(null),y([])}),[i,o]);var k=d.id===i.whitePlayerId?"w":"b",C="w"===k?i.turn%2===0:i.turn%2!==0;if(!i||!o)return Object(j.jsx)(j.Fragment,{});var S=c?[1,2,3,4,5,6,7,8]:[8,7,6,5,4,3,2,1],w=c?[8,7,6,5,4,3,2,1]:[1,2,3,4,5,6,7,8];return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("table",{border:"0",cellSpacing:"0",cellPadding:"0",children:Object(j.jsx)("tbody",{children:S.map((function(e){return Object(j.jsx)("tr",{children:w.map((function(t){return Object(j.jsx)("td",{children:Object(j.jsx)(z,{col:t,row:e,piece:o.inGameTiles["".concat(t).concat(e)]&&o.inGameTiles["".concat(t).concat(e)].piece,reversed:c,src:x,myTurn:C,myColor:k,highlights:m,lastMov:o.lastMov,onSelect:function(){return function(e,t){var c="".concat(e).concat(t);if(m.includes(c))u("/v1/games/".concat(i.id,"/moves"),"post",d.api_key,{piece:o.inGameTiles[x].piece,src:x,dest:c},(function(e,t){!e&&t&&l(t)}));else{f(c);var n=Object(G.getAttacked)(o.inGameTiles,k,e,t),a=Object(G.getCastling)(o.inGameTiles,k,e,t);y(n.concat(a))}}(t,e)}},"".concat(t).concat(e))},t)}))},e)}))})})})}function U(e){var t=e.captured;return Object(j.jsx)("div",{style:{overflow:"hidden",height:"30px"},children:t.map((function(e){return Object(j.jsx)("div",{style:{width:"30px",height:"30px",backgroundSize:"30px 30px",float:"left",backgroundImage:"url('/assets/".concat(e.slice(0,-1),".svg')")}},e)}))})}function K(){var e=O(),t=Object(s.a)(e,1)[0],c=L(),n=Object(s.a)(c,4),a=n[0],r=n[1],i=n[3],o=!!a&&t.id!==a.whitePlayerId;if(!a||!r)return Object(j.jsx)(j.Fragment,{});return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{children:o?a.whitePlayerName:a.blackPlayerName}),Object(j.jsx)(U,{captured:o?r.blackCaptured:r.whiteCaptured}),Object(j.jsx)(A,{reversed:o,turn:a.turn}),Object(j.jsx)("div",{children:o?a.blackPlayerName:a.whitePlayerName}),Object(j.jsx)(U,{captured:o?r.whiteCaptured:r.blackCaptured}),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{disabled:0===r.turn,style:{float:"left"},onClick:function(){i(0)},children:"Beg"}),Object(j.jsx)("button",{disabled:0===r.turn,style:{float:"left"},onClick:function(){i(r.turn-1)},children:"Prev"}),Object(j.jsx)("div",{style:{float:"left"},children:r.turn}),Object(j.jsx)("button",{disabled:r.turn===a.turn,style:{float:"left"},onClick:function(){i(r.turn+1)},children:"Next"}),Object(j.jsx)("button",{disabled:r.turn===a.turn,style:{float:"left"},onClick:function(){i(a.turn)},children:"End"})]})]})}var M=c(96),V=c.n(M);function W(){var e=O(),t=Object(s.a)(e,3),c=t[0],a=t[2],r=L(),i=Object(s.a)(r,3),o=i[0],l=i[2],b=Object(n.useCallback)((function(e){u("/v1/games/".concat(e),"get",c.api_key,null,(function(e,t){l(t)}))}),[c.api_key,l]);Object(n.useEffect)((function(){console.log("Connecting to socket.io");var e=V()();return e.emit("link",c.id),e.on("FromAPI",(function(e){})),e.on("gameTurnChanged",(function(e){o&&b(o.id)})),function(){console.log("disconnecting from socket.io"),e.disconnect()}}),[c.id,o,b]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(J.a,{bg:"light",expand:"lg",children:[Object(j.jsx)(J.a.Brand,{children:"JSChess"}),Object(j.jsx)(J.a.Toggle,{}),Object(j.jsx)(J.a.Collapse,{className:"justify-content-end mr-auto",children:Object(j.jsx)(_.a,{title:c.username,id:"basic-nav-dropdown",alignRight:!0,children:Object(j.jsx)(_.a.Item,{onClick:function(e){e.preventDefault(),a((function(){}))},children:"Salir"})})})]}),Object(j.jsx)(R.a,{fluid:!0,children:Object(j.jsxs)(q.a,{children:[Object(j.jsx)(B.a,{xs:3,className:"m-0 p-0",children:Object(j.jsx)(D,{onGameSelected:b})}),Object(j.jsx)(B.a,{xs:6,className:"m-0 p-0",children:Object(j.jsx)(K,{})})]})})]})}function H(){var e=f("chiquimarzo"),t=Object(s.a)(e,3),c=t[0],a=t[2],r=f("chiquimarzo@gmail.com"),i=Object(s.a)(r,3),l=i[0],b=i[2],d=f("123456"),O=Object(s.a)(d,3),h=O[0],p=O[2],k=f("123456"),C=Object(s.a)(k,3),S=C[0],w=C[2],I=Object(n.useState)(),N=Object(s.a)(I,2),T=N[0],F=N[1],G=Object(n.useState)("create"),P=Object(s.a)(G,2),E=P[0],L=P[1];return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(g.a,{style:{width:"36rem"},className:"mx-auto",children:Object(j.jsxs)(g.a.Body,{children:[Object(j.jsx)(g.a.Title,{children:"Registrarse"}),"create"===E&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g.a.Text,{children:"Puede crear una cuenta \xfanicamente con los siguientes datos:"}),Object(j.jsxs)(m.a,{children:[Object(j.jsxs)(m.a.Group,{children:[Object(j.jsx)(m.a.Label,{children:"Nombre de Usuario"}),Object(j.jsx)(m.a.Control,Object(o.a)({type:"text"},c))]}),Object(j.jsxs)(m.a.Group,{children:[Object(j.jsx)(m.a.Label,{children:"Email"}),Object(j.jsx)(m.a.Control,Object(o.a)(Object(o.a)({type:"email"},l),{},{placeholder:"Para recuperar su cuenta si tiene olvida su contrase\xf1a"}))]}),Object(j.jsxs)(m.a.Group,{children:[Object(j.jsx)(m.a.Label,{children:"Contrase\xf1a"}),Object(j.jsx)(m.a.Control,Object(o.a)(Object(o.a)({type:"password"},h),{},{placeholder:"Contrase\xf1a que usar\xe1 para iniciar sesi\xf3n"}))]}),Object(j.jsxs)(m.a.Group,{children:[Object(j.jsx)(m.a.Label,{children:"Confirmaci\xf3n de la Contrase\xf1a"}),Object(j.jsx)(m.a.Control,Object(o.a)(Object(o.a)({type:"password"},S),{},{placeholder:"Repita la contrase\xf1a"}))]}),T&&Object(j.jsx)(y.a,{variant:"danger",children:T}),Object(j.jsx)(v.a,{variant:"primary",onClick:function(e){e.preventDefault(),c.value?l.value?h.value?S.value?h.value!==S.value?(w(),F("La contrase\xf1a y su confirmaci\xf3n no coinciden")):u("/v1/users/","POST",null,{username:c.value,email:l.value,password:h.value},(function(e,t){e?F(e):L("created")})):(w(),F("Debe escribir una confirmaci\xf3n de contrase\xf1a")):(p(),F("Debe escribir una contrase\xf1a")):(b(),F("Debe escribir un correo")):(a(),F("Debe escribir un nombre de usuario"))},children:"Crear Cuenta"})]})]}),"created"===E&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(g.a.Text,{children:[c.value," su cuenta se cre\xf3 con \xe9xito, ahora puede iniciar sesi\xf3n con los datos que suministr\xf3"]}),Object(j.jsx)(x.b,{to:"/login",children:Object(j.jsx)(v.a,{variant:"primary",children:"Ir al Inicio de Sesi\xf3n"})})]})]})})})}var Q=function(){return Object(j.jsx)(d,{children:Object(j.jsx)(x.a,{children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{path:"/recover",children:Object(j.jsx)(C,{})}),Object(j.jsx)(i.b,{path:"/login",children:Object(j.jsx)(k,{})}),Object(j.jsx)(i.b,{path:"/register",children:Object(j.jsx)(H,{})}),Object(j.jsx)(p,{path:"/secret",children:Object(j.jsx)("h1",{children:"Secret"})}),Object(j.jsx)(p,{path:"/",children:Object(j.jsx)(E,{children:Object(j.jsx)(W,{})})})]})})})};r.a.render(Object(j.jsx)(Q,{}),document.getElementById("root"))},42:function(e,t){var c=function(e,t){return e===t[0]},n=function(e,t,n,a,r,s,l){if(s>=1&&s<=8&&l>=1&&l<=8){var u="".concat(s).concat(l),j="".concat(a).concat(r);if(!t[u]||!c(n,t[u].piece)){var b=[];Object.keys(t).forEach((function(e){e!==j&&e!==u&&(b[e]=t[e])})),b[u]={piece:t[j].piece,movs:t[j].movs+1};for(var d=!1,O=0,h=Object.keys(b);O<h.length;O++){var p=h[O],x=b[p].piece;if(x[0]!==n)if("k"!==x[1]){if(o(b,x[0],parseInt(p[0]),parseInt(p[1])).includes(u)){d=!0;break}}else if(i(parseInt(p[0]),parseInt(p[1])).map((function(e){return"".concat(e[0]).concat(e[1])})).includes(u)){d=!0;break}}d||e.push(u)}}},a=function(e,t,n,a,r,i,o){for(var s=a+i,l=r+o;s>=1&&s<=8&&l>=1&&l<=8;s+=i,l+=o){var u="".concat(s).concat(l),j=t[u];if(j){c(n,j.piece)||e.push(u);break}e.push(u)}},r=function(e){var t={p:0,n:1,b:2,r:3,q:4};return e.sort((function(e,c){var n=t[e.slice(1,2)],a=t[c.slice(1,2)];return n>a?1:n<a?-1:0}))},i=function(e,t){return[[e,t+1],[e+1,t+1],[e+1,t],[e+1,t-1],[e,t-1],[e-1,t-1],[e-1,t],[e-1,t+1]]},o=function(e,t,r,o){var s=[],l="".concat(r).concat(o),u=e[l].piece,j=u.slice(1,-1),b=u.slice(0,1);if("k"===j)i(r,o).forEach((function(c){return n(s,e,t,r,o,c[0],c[1])}));else if("r"===j)a(s,e,t,r,o,0,1),a(s,e,t,r,o,0,-1),a(s,e,t,r,o,1,0),a(s,e,t,r,o,-1,0);else if("n"===j)(function(e,t){return[[e+1,t+2],[e+2,t+1],[e+2,t-1],[e+1,t-2],[e-1,t-2],[e-2,t-1],[e-2,t+1],[e-1,t+2]]})(r,o).forEach((function(n){return function(e,t,n,a,r){if(a>=1&&a<=8&&r>=1&&r<=8){var i="".concat(a).concat(r);t[i]&&c(n,t[i].piece)||e.push(i)}}(s,e,t,n[0],n[1])}));else if("b"===j)a(s,e,t,r,o,1,1),a(s,e,t,r,o,1,-1),a(s,e,t,r,o,-1,1),a(s,e,t,r,o,-1,-1);else if("q"===j)a(s,e,t,r,o,1,1),a(s,e,t,r,o,1,-1),a(s,e,t,r,o,-1,1),a(s,e,t,r,o,-1,-1),a(s,e,t,r,o,0,1),a(s,e,t,r,o,0,-1),a(s,e,t,r,o,1,0),a(s,e,t,r,o,-1,0);else if("p"===j){var d="w"===b?1:-1;e["".concat(r).concat(o+d)]||(s.push("".concat(r).concat(o+d)),1!==e[l].movs||e["".concat(r).concat(o+d+d)]||s.push("".concat(r).concat(o+d+d))),e["".concat(r+1).concat(o+d)]&&t!==e["".concat(r+1).concat(o+d)].piece.slice(0,1)&&s.push("".concat(r+1).concat(o+d)),e["".concat(r-1).concat(o+d)]&&t!==e["".concat(r-1).concat(o+d)].piece.slice(0,1)&&s.push("".concat(r-1).concat(o+d))}return s};e.exports={getBoard:function(e,t){var c,n=[],a=[],i=[];return Object.entries(e).forEach((function(e){var r=Object.keys(e[1]).map((function(e){return parseInt(e)})).sort((function(e,t){return e-t})).filter((function(e){return e<=t})),o=r[r.length-1];if("c"===e[1][o])"w"===e[0].slice(0,1)?a.push(e[0]):i.push(e[0]);else if(n[e[1][o]]={piece:e[0],movs:r.length,maxTurn:o},o===t&&t>0){var s={piece:e[0],orig:e[1][r[r.length-2]],dest:e[1][r[r.length-1]]};c&&"r"!==c.piece.slice(1,2)||(c=s)}})),{inGameTiles:n,whiteCaptured:r(a),blackCaptured:r(i),lastMov:c,turn:t}},getAttacked:o,getCastling:function(e,t,c,n){var a=function(e,t){var c=Object.keys(e).filter((function(c){return e[c]&&e[c].piece.slice(0,1)!==t})),n=[];return c.forEach((function(c){n=n.concat(o(e,"w"===t?"b":"w",parseInt(c.slice(0,1)),parseInt(c.slice(1,2))))})),n}(e,t),r=[];return e["".concat(c).concat(n)]&&"k"===e["".concat(c).concat(n)].piece.slice(1,2)&&1===e["".concat(c).concat(n)].movs&&(a.includes("".concat(c).concat(n))||(e["1".concat(n)]&&"r"===e["1".concat(n)].piece.slice(1,2)&&1===e["1".concat(n)].movs&&(e["4".concat(n)]||e["3".concat(n)]||e["2".concat(n)]||a.includes("4".concat(n))||a.includes("3".concat(n))||r.push("".concat(c-2).concat(n))),e["8".concat(n)]&&"r"===e["8".concat(n)].piece.slice(1,2)&&1===e["8".concat(n)].movs&&(e["6".concat(n)]||e["7".concat(n)]||a.includes("6".concat(n))||a.includes("7".concat(n))||r.push("".concat(c+2).concat(n))))),r}}}},[[141,1,2]]]);
//# sourceMappingURL=main.117a19d6.chunk.js.map